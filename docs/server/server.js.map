{"version":3,"file":"server.js","sources":["../../src/server/helpers/api.js","../../src/server/controllers/HomeController.js","../../src/server/controllers/CollectionController.js","../../src/server/controllers/SearchController.js","../../src/server/server.js"],"sourcesContent":["const baseURL = `https://www.rijksmuseum.nl/api/en/collection?key=${process.env.VITE_API_KEY}&imgonly=true`;\n\nexport const searchAll = async (q) => {\n  const baseURL = `https://www.rijksmuseum.nl/api/en/collection?key=${process.env.VITE_API_KEY}&imgonly=true`;\n  const search = `&q=${q}`;\n  const URL = baseURL + search;\n  console.log(import.meta.env);\n  try {\n    const searchResults = await request(URL);\n    return searchResults;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    console.log('SearchDone');\n  }\n};\n\nexport const searchId = async (id) => {\n  const baseURL = `https://www.rijksmuseum.nl/api/en/collection/${id}/?key=${process.env.VITE_API_KEY}`;\n  \n  // const URL = baseURL + search;\n  console.log(import.meta.env);\n  try {\n    const data = await request(baseURL);\n    return data;\n  } catch (error) {\n    console.log(error);\n  } finally {\n    console.log('Got id ');\n  }\n};\n\n\nconst request = async (url) => {\n  try {\n    const res = await fetch(url);\n    const data = await res.json();\n    return data;\n  } catch (err) {\n    console.log(err);\n    throw new Error(err);\n  }\n};\n","import express from 'express'\nimport { searchAll } from '../helpers/api.js';\n\nconst apiKey = 'S3GLzVAr'\nconst URL = `https://www.rijksmuseum.nl/api/en/collection?key=${apiKey}&imgonly=true`;\n\n// const thisUser = req.user;\n// \tlet users = [];\n\t\n// \ttry {\n// \t\tartwork = await matchHelper.users(thisUser);\n// \t\tif (req.user) {\n// \t\t\tres.render('pages/index', {\n// \t\t\t\ttitle: 'Discover',\n// \t\t\t\tuser: req.user,\n// \t\t\t\tusers: users\n// \t\t\t});\n// \t\t} else {\n// \t\t\tres.redirect('/error');\n// \t\t}\n// \t} catch (err) {\n// \t\tnext(err);\n// \t}\nexport const HomeController = async (req,res) => {\n\ttry {\n\t\tres.render('index', {\n\t\t\ttitle: 'home'\n\t\t})\n\t} catch (error) {\n\t\tconsole.log(error)\n\t}\n}\n\n\n\n\n\nexport const users = async (req, res, next) => {\n\tconst thisUser = req.user;\n\tlet users = [];\n\t\n\ttry {\n\t\tusers = await matchHelper.users(thisUser);\n\t\tif (req.user) {\n\t\t\tres.render('pages/index', {\n\t\t\t\ttitle: 'RijksMuseum',\n\t\t\t\tuser: req.user,\n\t\t\t\tusers: users\n\t\t\t});\n\t\t} else {\n\t\t\tres.redirect('/login');\n\t\t}\n\t} catch (err) {\n\t\tnext(err);\n\t}\n};\n\nexport default HomeController;","import { searchAll, searchId } from '../helpers/api.js';\n\nexport const CollectionController = async (req,res) => {\n\t// const query = req.query.q;\n\t// console.log(query)\n\ttry {\n\t\tconst data = await searchAll('Rembrand');\n\t\tres.render('collection', {\n\t\t\ttitle: 'Collecton',\n\t\t\tquery: 'Rembrand',\n\t\t\tdata: data.artObjects\n\t\t})\n\t} catch (error) {\n\t\tconsole.log(error)\n\t}\n}\n\nexport const CollectionDetailsController = async (req,res) => {\n  const id = req.params.id;\n\t// const query = req.query.q;\n\t// console.log(query)\n\ttry {\n\t\tconst data = await searchId(id);\n\t\tconsole.log(req.params)\n\t\tres.render('details', {\n\t\t\ttitle: 'Collecton',\n\t\t\tdata: data.artObject\n\t\t})\n\t} catch (error) {\n\t\tconsole.log(error)\n\t}\n}\n\n\nexport default CollectionController","import { searchAll } from '../helpers/api.js';\n\nexport const SearchController = async (req,res) => {\n\tconst query = req.query.q;\n\tconsole.log(query)\n\ttry {\n\t\tconst data = await searchAll(query);\n\t\tconsole.log(data)\n\t\tres.render('search', {\n\t\t\ttitle: 'Search',\n\t\t\tquery: query,\n\t\t\tdata: data.artObjects\n\t\t})\n\t} catch (error) {\n\t\tconsole.log(error)\n\t}\n}\nexport default SearchController","import express from 'express'\nimport ViteExpress from 'vite-express'\nimport bodyParser from 'body-parser'\nimport * as exphbs from 'express-handlebars'\nimport path from 'path'\nimport { fileURLToPath } from 'url';\nimport { HomeController } from './controllers/HomeController.js'\nimport { CollectionController,CollectionDetailsController } from './controllers/CollectionController.js'\nimport {SearchController} from './controllers/SearchController.js'\nimport dotenv  from \"dotenv\"\n// const express = require(\"express\");\n// const ViteExpress = require(\"vite-express\");\n\ndotenv.config()\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n// const __joindirname = path.join(__filename);\n\n\nconst app = express();\napp.use(express.static('public/'))\nViteExpress.config({\n  mode: 'development'\n });\n\n\nconst hbs = exphbs.create({\n  defaultLayout: 'main',\n  partialsDir: __dirname + '/views/partials/'\n})\n\n\napp.engine('handlebars', hbs.engine)\n\napp.use(bodyParser.json());\napp.use(bodyParser.urlencoded({\n\textended: true\n}));\n// app.use('/', express.static('public/'));\n\napp.set('view engine', 'handlebars');\napp.set('views', path.join(__dirname, 'views'));\n\napp.get(\"/\", HomeController);\napp.get(\"/:?q\", SearchController);\n\napp.get(\"/collection\", CollectionController);\napp.get(\"/collection/:id\", CollectionDetailsController);\n\nViteExpress.listen(app, 3000, () => {\n  console.log(\"Server is listening on port 3000...\")\n});"],"names":[],"mappings":"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"}